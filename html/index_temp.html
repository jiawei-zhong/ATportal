<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>基因自动补全示例</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="//code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="//code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <style>
    .ui-autocomplete {
      max-height: 200px;
      overflow-y: auto; /* 当列表超过最大高度时显示滚动条 */
      overflow-x: hidden; /* 防止水平滚动条 */
      z-index: 1000; /* 足够高，以确保列表在其他元素上方 */
    }
  </style>
</head>
<body>

<div class="search-container">
  <label for="gene-search">搜索基因:</label>
  <input id="gene-search" name="gene-search" placeholder="输入基因名称...">
</div>

<script>
  $(function() {
    $("#gene-search").autocomplete({
      source: function(request, response) {
        $.ajax({
          url: "http://atportal.medh.ki.se/autocomplete", // Flask应用程序的URL
          dataType: "json",
          data: {
            term: request.term // 用户在搜索框中输入的内容
          },
          success: function(data) {
            response(data); // 将返回的数据传递给autocomplete
          }
        });
      },
      minLength: 2, // 最小触发字符数
      select: function(event, ui) {
        // 用户选择一个选项后执行的操作
        var selectedGene = ui.item.value;
        // 构建目标URL
        var targetUrl = "http://atportal.medh.ki.se/gene?gene=" + encodeURIComponent(selectedGene);
        // 跳转到目标URL
        window.location.href = targetUrl;
        return false; // 防止默认行为
      }
    });
  });
</script>

</body>
</html>
